{% extends 'base.html' %}

{% block title %}Dashboard - StudyBuddy AI{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="bg-white p-8 rounded-2xl shadow-md">
        <h2 class="text-3xl font-bold text-[#0E0E12] mb-6">Welcome to your Dashboard, {{ user.email }}!</h2>

        {% if message %}
            <p class="text-[#2DC6A1] mb-4">{{ message }}</p>
        {% endif %}
        {% if error %}
            <p class="text-[#FF6F61] mb-4">{{ error }}</p>
        {% endif %}

        <h3 class="text-2xl font-semibold text-[#2DC6A1] mb-4">Upload a File to Generate Study Materials</h3>
        <form action="/upload" method="post" enctype="multipart/form-data" class="mb-8 space-y-4">
            <input type="file" name="file" accept=".pdf,.docx" required class="block w-full text-sm text-gray-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-full file:border-0
                file:text-sm file:font-semibold
                file:bg-[#eaf8f4] file:text-[#2DC6A1]
                hover:file:bg-[#d8f0e9]">
            <button type="submit" class="bg-[#2DC6A1] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#24a284] btn-primary">Upload and Generate</button>
        </form>

        <h3 class="text-2xl font-semibold text-[#2DC6A1] mb-4">Your Study Sets</h3>
        {% if study_sets %}
            <ul class="space-y-3">
                {% for study_set in study_sets %}
                    <li class="bg-white p-4 rounded-lg shadow-sm flex justify-between items-center card-hover-effect">
                        <a href="/study-sets/{{ study_set.id }}" class="text-[#2DC6A1] hover:underline text-lg font-medium">{{ study_set.document_name }}</a>
                        <div class="flex items-center space-x-4">
                            <span class="text-gray-500 text-sm">Uploaded: {{ study_set.upload_timestamp.strftime('%Y-%m-%d %H:%M') }}</span>
                            <form action="/delete-study-set/{{ study_set.id }}" method="post" onsubmit="return confirm('Are you sure you want to delete this study set?');">
                                <button type="submit" class="bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 text-sm font-semibold">Delete</button>
                            </form>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-gray-600">No study sets saved yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}